<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Redirigiendo al blog...</title>
<meta name="robots" content="index, follow">
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #f9f9f9;
        color: #333;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        align-items: center;
        justify-content: center;
    }
    header {
        text-align: center;
        margin-bottom: 2rem;
    }
    h1 {
        color: #007ACC;
    }
    .post {
        background: #fff;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        max-width: 600px;
        text-align: left;
        margin-bottom: 2rem;
    }
    .post h2 {
        color: #222;
    }
    .btn {
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background: #007ACC;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        transition: background 0.3s;
    }
    .btn:hover {
        background: #005f99;
    }
</style>
<script>
async function setupMeta() {
    try {
        // Cargar JSON del blog
        const response = await fetch('https://bynashi.qzz.io/data/BLOG/posts.json');
        const data = await response.json();

        const posts = data.posts;
        if (!posts || posts.length === 0) return;

        // Encontrar la última entrada por fecha
        let latest = posts[0];
        posts.forEach(post => {
            if (new Date(post.date) > new Date(latest.date)) {
                latest = post;
            }
        });

        // Actualizar title y meta tags
        document.title = `BLOG - ${latest.title}`;

        const metaDescription = document.createElement('meta');
        metaDescription.name = "description";
        metaDescription.content = latest.content;
        document.head.appendChild(metaDescription);

        const metaKeywords = document.createElement('meta');
        metaKeywords.name = "keywords";
        metaKeywords.content = latest.title;
        document.head.appendChild(metaKeywords);

        // Insertar datos estructurados JSON-LD
        const jsonLd = document.createElement('script');
        jsonLd.type = 'application/ld+json';
        jsonLd.text = JSON.stringify({
            "@context": "https://schema.org",
            "@type": "BlogPosting",
            "headline": latest.title,
            "description": latest.content,
            "datePublished": latest.date,
            "author": {
                "@type": "Person",
                "name": "Na Books"
            },
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": window.location.href
            }
        });
        document.head.appendChild(jsonLd);

        // Mostrar la última entrada de manera visible
        const contentDiv = document.createElement('div');
        contentDiv.className = 'post';
        contentDiv.innerHTML = `<h2>${latest.title}</h2><p>${latest.content}</p>`;
        document.body.appendChild(contentDiv);

        // Botón para ir al blog
        const buttonDiv = document.createElement('div');
        buttonDiv.innerHTML = `<a class="btn" href="https://bynashi.qzz.io/">Ir al blog principal</a>`;
        document.body.appendChild(buttonDiv);

    } catch (error) {
        console.error('Error al cargar el JSON:', error);
        const errorDiv = document.createElement('div');
        errorDiv.className = 'post';
        errorDiv.innerHTML = `<h2>Error al cargar el blog</h2><p>Por favor, intenta acceder directamente al <a href="https://bynashi.qzz.io/">blog principal</a>.</p>`;
        document.body.appendChild(errorDiv);
    }
}

// Ejecutar al cargar la página
window.addEventListener('DOMContentLoaded', setupMeta);
</script>
</head>
<body>
<header>
    <h1>Bienvenido al blog de Na Books</h1>
    <p>Aquí puedes ver la última entrada antes de ir al blog principal.</p>
</header>
</body>
</html>
